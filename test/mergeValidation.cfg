#! /bin/env cmsRun

process SoftLeptonTag = {

    # input file
    source = EmptySource { }

    # Analysis and validation plots
    module  bTagSoftMuonAnalysis = bTagSoftLeptonAnalysis from "RecoBTag/Analysis/data/bTagSoftLeptonAnalysis.cfi" 
    replace bTagSoftMuonAnalysis.jetTagModuleLabel = { "softMuonJetTags" }
    replace bTagSoftMuonAnalysis.inputfile  = "mergedMuon.root"
    replace bTagSoftMuonAnalysis.rootfile   = "softMuon.root"
    replace bTagSoftMuonAnalysis.update     = true
    #replace bTagSoftMuonAnalysis.produceEps = false
    #replace bTagSoftMuonAnalysis.producePs  = true
 
    module  bTagSoftMuonAnalysisNoIP = bTagSoftLeptonAnalysis from "RecoBTag/Analysis/data/bTagSoftLeptonAnalysis.cfi" 
    replace bTagSoftMuonAnalysisNoIP.jetTagModuleLabel = { "softMuonNoIPJetTags" }
    replace bTagSoftMuonAnalysisNoIP.inputfile  = "mergedMuonNoIP.root"
    replace bTagSoftMuonAnalysisNoIP.rootfile   = "softMuonNoIP.root"
    replace bTagSoftMuonAnalysisNoIP.update     = true
    #replace bTagSoftMuonAnalysisNoIP.produceEps = false
    #replace bTagSoftMuonAnalysisNoIP.producePs  = true
 
    module  bTagSoftElectronAnalysis = bTagSoftLeptonAnalysis from "RecoBTag/Analysis/data/bTagSoftLeptonAnalysis.cfi" 
    replace bTagSoftElectronAnalysis.jetTagModuleLabel = { "softElectronJetTags" }
    replace bTagSoftElectronAnalysis.inputfile  = "mergedElectron.root"
    replace bTagSoftElectronAnalysis.rootfile   = "softElectron.root"
    replace bTagSoftElectronAnalysis.update     = true
    #replace bTagSoftElectronAnalysis.produceEps = false
    #replace bTagSoftElectronAnalysis.producePs  = true
   
    # events to analyze
    untracked PSet maxEvents = { untracked int32 input = 0 }

    # module execution
    path p = { bTagSoftMuonAnalysis & bTagSoftMuonAnalysisNoIP & bTagSoftElectronAnalysis }
}
