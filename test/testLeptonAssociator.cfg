#! /bin/env cmsRun

process TestEfficiency = {
    
    source = PoolSource {
        untracked vstring fileNames = { 
            # RelVal 1.5.2: b jets 50-120 - 1050 events
            '/store/RelVal/2007/7/10/RelVal-RelVal152BJets50-120-1184059625/0000/164AA33D-022F-DC11-B0AB-000423D99F1E.root',
            '/store/RelVal/2007/7/10/RelVal-RelVal152BJets50-120-1184059625/0000/2E53B35B-212F-DC11-969D-001617DBD220.root',
            '/store/RelVal/2007/7/10/RelVal-RelVal152BJets50-120-1184059625/0000/58F35F11-042F-DC11-8A1B-000423D6C9E2.root'
        }
    }
    # events to analyze
    untracked PSet maxEvents = { untracked int32 input = -1 }
        
    # Message Logger
    include "FWCore/MessageLogger/data/MessageLogger.cfi"
    
    # Magnetic Field
    include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
  
    # Tracking truth (TrackingParticles) 
    #include "SimGeneral/MixingModule/data/mixNoPU.cfi"
    #include "SimGeneral/TrackingAnalysis/data/trackingParticles.cfi"
    #replace trackingParticles.HepMCDataLabels = { 'source' }
    
    # Track Associators
    include "SimTracker/TrackAssociation/data/TrackAssociatorByChi2.cfi"
    include "SimTracker/TrackAssociation/data/TrackAssociatorByHits.cfi"
    replace TrackAssociatorByHitsESProducer.MinHitFraction = 0.3

    module testAnalyzer = testLeptonAssociator {
        # tracks
        InputTag tracks                 = ctfWithMaterialTracks
        # leptons
        InputTag muons                  = muons
        InputTag standAloneMuonTracks   = standAloneMuons
        InputTag globalMuonTracks       = globalMuons
        # MC truth
        InputTag trackingTruth          = trackingParticles
        double   minPt                  = 1.2
    }
    
    path p = {
        #mix, trackingParticles,
        testAnalyzer
    }
    
    #module out = PoolOutputModule {
    #    untracked string fileName = "file:out.root"
    #}
    #
    #endpath end = {
    #    out
    #}
}
