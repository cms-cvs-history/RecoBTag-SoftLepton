#! /bin/env cmsRun

process TestEfficiency = {
    
    source = PoolSource {
        untracked vstring fileNames = { 
            # RelVal b jets
            '/store/RelVal/2007/6/4/RelVal-RelVal150pre5BJets50-120-1180948067/0000/3C93FA72-C812-DC11-9C31-003048767F27.root',
            '/store/RelVal/2007/6/4/RelVal-RelVal150pre5BJets50-120-1180948067/0000/984FF8FD-B812-DC11-A4DE-001731AF698F.root'                    
        }
    }

    # events to analyze
    untracked PSet maxEvents = { untracked int32 input = -1 }

    # Message Logger
    include "FWCore/MessageLogger/data/MessageLogger.cfi"
    replace MessageLogger.cout.threshold = "WARNING"
    replace MessageLogger.cerr.threshold = "ERROR"
    
    # Magnetic Field
    include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
  
    # Tracking truth (TrackingParticles) 
    #include "SimGeneral/MixingModule/data/mixNoPU.cfi"
    #include "SimGeneral/TrackingAnalysis/data/trackingParticles.cfi"
    #replace trackingParticles.HepMCDataLabels = { 'source' }
    
    # Track Associators
    include "SimTracker/TrackAssociation/data/TrackAssociatorByChi2.cfi"
    include "SimTracker/TrackAssociation/data/TrackAssociatorByHits.cfi"
    replace TrackAssociatorByHitsESProducer.MinHitFraction = 0.3

    module testAnalyzer = testLeptonAssociator {
        # tracks
        InputTag tracks                 = ctfWithMaterialTracks
        # leptons
        InputTag muons                  = muons
        InputTag standAloneMuonTracks   = standAloneMuons
        InputTag globalMuonTracks       = globalMuons
        # MC truth
        InputTag trackingTruth          = trackingParticles
        uint32   leptonFlavour          = 13
        double   minPt                  = 1.2
    }
    
    path p = {
        #mix, trackingParticles,
        testAnalyzer
    }
    
    #module out = PoolOutputModule {
    #    untracked string fileName = "file:out.root"
    #}
    #
    #endpath end = {
    #    out
    #}
}
