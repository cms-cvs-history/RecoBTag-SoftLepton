#! /bin/env cmsRun

process TestEfficiency = {
    
    source = PoolSource {
        untracked vstring fileNames = { 'file:/tmp/fwyzard/04B6AEF9-65A0-DB11-A809-0002B3AFAFDB_1.3.0-pre5.root' }
        untracked int32 maxEvents = -1
    }

    # Message Logger
    include "FWCore/MessageLogger/data/MessageLogger.cfi"
    replace MessageLogger.cout.threshold = "WARNING"
    replace MessageLogger.cerr.threshold = "ERROR"
    
    # Magnetic Field
    include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
  
    # Tracking truth (TrackingParticles) 
    include "SimGeneral/MixingModule/data/mixNoPU.cfi"
    include "SimGeneral/TrackingAnalysis/data/trackingParticles.cfi"
    replace trackingParticles.HepMCDataLabels = { 'VtxSmeared' }
    
    # Track Associators
    include "SimTracker/TrackAssociation/data/TrackAssociatorByChi2.cfi"
    include "SimTracker/TrackAssociation/data/TrackAssociatorByHits.cfi"

    module testAnalyzer = testLeptonAssociator {
        string   trackAssociator = "TrackAssociatorByHits"
       #string   trackAssociator = "TrackAssociatorByChi2"
        InputTag recoTracks      = ctfWithMaterialTracks
        InputTag recoLeptons     = globalMuons
        InputTag trackingTruth   = trackingParticles
        uint32   leptonFlavour   = 13
    }
    
    path p = {
        mix, trackingParticles,
        testAnalyzer
    }
    
    #module out = PoolOutputModule {
    #    untracked string fileName = "file:out.root"
    #}
    #
    #endpath end = {
    #    out
    #}
}
