#! /bin/env cmsRun

process TestEfficiency = {
    
    source = PoolSource {
        untracked vstring fileNames = { 
            # RelVal b jets
            "/store/RelVal/2007/6/30/RelVal-RelVal151BJets50-120-1183231184/0000/52D7A9BD-6427-DC11-90F6-001617C3B6F4.root",
            "/store/RelVal/2007/6/30/RelVal-RelVal151BJets50-120-1183231184/0000/E463D294-6427-DC11-81F6-000423D644F6.root",
            "/store/RelVal/2007/6/30/RelVal-RelVal151BJets50-120-1183231184/0000/F277E6A0-7C27-DC11-A4AE-000423D6A3E4.root"
        }
    }

    # events to analyze
    untracked PSet maxEvents = { untracked int32 input = 10 }

    # Message Logger
    include "FWCore/MessageLogger/data/MessageLogger.cfi"
    
    # Magnetic Field
    include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
  
    # Tracking truth (TrackingParticles) 
    #include "SimGeneral/MixingModule/data/mixNoPU.cfi"
    #include "SimGeneral/TrackingAnalysis/data/trackingParticles.cfi"
    #replace trackingParticles.HepMCDataLabels = { 'source' }
    
    # Track Associators
    include "SimTracker/TrackAssociation/data/TrackAssociatorByChi2.cfi"
    include "SimTracker/TrackAssociation/data/TrackAssociatorByHits.cfi"
    replace TrackAssociatorByHitsESProducer.MinHitFraction = 0.3

    module testAnalyzer = testLeptonAssociator {
        # tracks
        InputTag tracks                 = ctfWithMaterialTracks
        # leptons
        InputTag muons                  = muons
        InputTag standAloneMuonTracks   = standAloneMuons
        InputTag globalMuonTracks       = globalMuons
        # MC truth
        InputTag trackingTruth          = trackingParticles
        uint32   leptonFlavour          = 13
        double   minPt                  = 1.2
    }
    
    path p = {
        #mix, trackingParticles,
        testAnalyzer
    }
    
    #module out = PoolOutputModule {
    #    untracked string fileName = "file:out.root"
    #}
    #
    #endpath end = {
    #    out
    #}
}
