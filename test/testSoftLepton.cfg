#! /bin/env cmsRun

process SoftLeptonTag = {

    # input file
    source = PoolSource {
        untracked vstring fileNames = {
          "rfio:/castor/cern.ch/cms/store/unmerged/RelVal/2006/11/3/RelVal120pre4BJets50-120/GEN-SIM-DIGI-RECO/0005/0E90F583-5C6D-DB11-A8D6-0007E91B5B29.root"
          #"rfio:/castor/cern.ch/cms/store/unmerged/RelVal/2006/11/3/RelVal120pre4BJets50-120/GEN-SIM-DIGI-RECO/0005/3291E7BE-786D-DB11-A11F-0002B3D8EB55.root",
          #"rfio:/castor/cern.ch/cms/store/unmerged/RelVal/2006/11/3/RelVal120pre4BJets50-120/GEN-SIM-DIGI-RECO/0005/34BA09E6-A56C-DB11-8AC5-000E0C4DF2F6.root",
          #"rfio:/castor/cern.ch/cms/store/unmerged/RelVal/2006/11/3/RelVal120pre4BJets50-120/GEN-SIM-DIGI-RECO/0005/62FC5F23-D56B-DB11-913A-000E0C3F0C08.root",
          #"rfio:/castor/cern.ch/cms/store/unmerged/RelVal/2006/11/3/RelVal120pre4BJets50-120/GEN-SIM-DIGI-RECO/0005/784FFA3A-4E6E-DB11-BD88-0007E91B5F3F.root",
          #"rfio:/castor/cern.ch/cms/store/unmerged/RelVal/2006/11/3/RelVal120pre4BJets50-120/GEN-SIM-DIGI-RECO/0005/A0D02E50-A36C-DB11-85FF-0002B3D8E80D.root",
          #"rfio:/castor/cern.ch/cms/store/unmerged/RelVal/2006/11/3/RelVal120pre4BJets50-120/GEN-SIM-DIGI-RECO/0005/A24950D5-916B-DB11-8C5E-000E0C3F196E.root",
          #"rfio:/castor/cern.ch/cms/store/unmerged/RelVal/2006/11/3/RelVal120pre4BJets50-120/GEN-SIM-DIGI-RECO/0005/A6B29DBF-816D-DB11-81A8-0002B3D8EA9B.root",
          #"rfio:/castor/cern.ch/cms/store/unmerged/RelVal/2006/11/3/RelVal120pre4BJets50-120/GEN-SIM-DIGI-RECO/0005/AE0890A0-B36E-DB11-9AF3-00304858E00E.root",
          #"rfio:/castor/cern.ch/cms/store/unmerged/RelVal/2006/11/3/RelVal120pre4BJets50-120/GEN-SIM-DIGI-RECO/0005/AEE1C2AB-666D-DB11-B064-00304858DF38.root",
          #"rfio:/castor/cern.ch/cms/store/unmerged/RelVal/2006/11/3/RelVal120pre4BJets50-120/GEN-SIM-DIGI-RECO/0005/C6DEEBC6-B46B-DB11-8C0A-000E0C3F13CF.root",
          #"rfio:/castor/cern.ch/cms/store/unmerged/RelVal/2006/11/3/RelVal120pre4BJets50-120/GEN-SIM-DIGI-RECO/0005/DE5542CF-8F6B-DB11-A2A7-003048830953.root"
        }
        untracked int32 maxEvents = -1
    }

    # output file
    module out = PoolOutputModule {
        untracked string fileName = "file:softleptonbtag.root"
        untracked vstring outputCommands = {
            # drop all objects...
            "drop *",
            # ...but the b tag stuff...
            "keep *_jetTracksAssociator_*_*",
            "keep *_ctfWithMaterialTracks_*_*",
            "keep *_globalMuons_*_*",
            "keep *_iterativeCone5CaloJets_*_*",
            "keep *_softLepton_*_*",
            # ...and the MC infos
            "keep *_source_*_*",
            "keep *_VtxSmeared_*_*"
        }
    }

    # Message Logger
    include "FWCore/MessageLogger/data/MessageLogger.cfi"
    replace MessageLogger.cout.threshold = "INFO"
    
    # Geometry Field, Geometry, TransientTracks
    include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
    include "Geometry/TrackerSimData/data/trackerSimGeometryXML.cfi"
    include "TrackingTools/TransientTrack/data/TransientTrackBuilder.cfi"

    # Tracks to jets association
    include "RecoBTau/JetTracksAssociator/data/jetTracksAssociator.cfi"

    # SoftLepton b tagging
    include "RecoBTag/SoftLepton/data/softLepton.cff"

    # module execution
    path p = { jetTracksAssociator, softLeptonJetTags }

    endpath outpath = { out }
}
