#! /bin/env cmsRun

process testSoftLepton = {

    # input file
    source = PoolSource {
        untracked vstring fileNames = {
          # RelVal b jets
          '/store/RelVal/2007/6/4/RelVal-RelVal150pre5BJets50-120-1180948067/0000/3C93FA72-C812-DC11-9C31-003048767F27.root',
          '/store/RelVal/2007/6/4/RelVal-RelVal150pre5BJets50-120-1180948067/0000/984FF8FD-B812-DC11-A4DE-001731AF698F.root'
          # # RelVal c jets
          # '/store/RelVal/2007/6/4/RelVal-RelVal150pre5CJets50-120-1180948067/0000/0A88B8B1-B812-DC11-AF3E-0030487253A9.root',
          # '/store/RelVal/2007/6/4/RelVal-RelVal150pre5CJets50-120-1180948067/0000/DE47768C-C812-DC11-BB0C-00304876A0FF.root'
          # # RelVal QCD jets (50-80)
          # '/store/RelVal/2007/6/4/RelVal-RelVal150pre5QCD_pt50_80-1180948067/0000/128ED470-E812-DC11-AAB0-00304870D52F.root',
          # '/store/RelVal/2007/6/4/RelVal-RelVal150pre5QCD_pt50_80-1180948067/0000/4A203759-BA12-DC11-924B-00304875AAF5.root',
          # '/store/RelVal/2007/6/4/RelVal-RelVal150pre5QCD_pt50_80-1180948067/0000/C48B2962-3313-DC11-9934-001731AF66AD.root'
          # # RelVal QCD jets (80-120)
          # '/store/RelVal/2007/6/4/RelVal-RelVal150pre5QCD_pt80_120-1180948067/0000/7214955D-FF12-DC11-8BFA-001731A28F19.root',
          # '/store/RelVal/2007/6/4/RelVal-RelVal150pre5QCD_pt80_120-1180948067/0000/A4C81E54-C112-DC11-B2C2-003048754FB7.root'
        }
    }

    # output file
    module out = PoolOutputModule {
        untracked string fileName = "file:btag_softlepton.root"
        untracked vstring outputCommands = {
            # drop all objects...
            "drop *",
            # ...but the input objects...
            "keep *_iterativeCone5CaloJets_*_*",
            "keep *_ctfWithMaterialTracks_*_*",
            "keep *_offlinePrimaryVerticesFromCTFTracks_*_*",
            "keep *_globalMuons_*_*",
            "keep *_btagSoftElectrons_*_*",
            # ...the b tag stuff...
            "keep *_softElectronTagInfos_*_*",
            "keep *_softElectronBJetTags_*_*",
            "keep *_softMuonTagInfos_*_*",
            "keep *_softMuonBJetTags_*_*",
            "keep *_softMuonNoIPBJetTags_*_*",
            # ...and the MC infos
            "keep *_source_*_*",
            "keep *_VtxSmeared_*_*"
        }
    }

    # Message Logger
    include "FWCore/MessageLogger/data/MessageLogger.cfi"
    replace MessageLogger.cout.threshold = "INFO"
    
    # SoftLepton b tagging
    include "RecoBTag/SoftLepton/data/softLepton.cff"

    # module execution
    path softMuonPath     = { softMuonTagInfos, (softMuonBJetTags & softMuonNoIPBJetTags) }
    path softElectronPath = { btagSoftElectrons, softElectronTagInfos, softElectronBJetTags }

    # events to analyze
    untracked PSet maxEvents = {untracked int32 input = 10}

    endpath outpath = { out }
}
