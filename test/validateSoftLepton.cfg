#! /bin/env cmsRun

process SoftLeptonTag = {

    # input file
    source = PoolSource {
        untracked vstring fileNames = {
            # RelVal 1.6.0-pre9: b jets (50-120 GeV, 1000 events)
            '/store/mc/2007/8/10/RelVal-RelVal160pre9BJets50-120-CMSSW_1_6_0_pre9-1186773613/0000/2893A3B8-EA47-DC11-A793-003048767DF1.root',
            '/store/mc/2007/8/10/RelVal-RelVal160pre9BJets50-120-CMSSW_1_6_0_pre9-1186773613/0000/645D1DFD-E447-DC11-9715-003048754D09.root',
            # RelVal 1.6.0-pre9: c jets (50-120 GeV, 1000 events)
            '/store/mc/2007/8/10/RelVal-RelVal160pre9CJets50-120-CMSSW_1_6_0_pre9-1186773613/0000/222F01AD-E447-DC11-BBCE-003048767EE3.root',
            '/store/mc/2007/8/10/RelVal-RelVal160pre9CJets50-120-CMSSW_1_6_0_pre9-1186773613/0000/AA31A357-EF47-DC11-9400-00304876764F.root',
            # RelVal 1.6.0-pre9: QCD jets (50-80 GeV, 5000 events)
            '/store/mc/2007/8/10/RelVal-RelVal160pre9QCD_pt50_80-CMSSW_1_6_0_pre9-1186773613/0000/0485B1DF-E247-DC11-9D71-003048728771.root',
            '/store/mc/2007/8/10/RelVal-RelVal160pre9QCD_pt50_80-CMSSW_1_6_0_pre9-1186773613/0000/24BA80CD-DA47-DC11-884B-003048767DC9.root',
            '/store/mc/2007/8/10/RelVal-RelVal160pre9QCD_pt50_80-CMSSW_1_6_0_pre9-1186773613/0000/48E3AB1A-E347-DC11-A288-00304875AB51.root',
            '/store/mc/2007/8/10/RelVal-RelVal160pre9QCD_pt50_80-CMSSW_1_6_0_pre9-1186773613/0000/5E4EF8FF-E447-DC11-BB0D-0030487270ED.root',
            '/store/mc/2007/8/10/RelVal-RelVal160pre9QCD_pt50_80-CMSSW_1_6_0_pre9-1186773613/0000/8AFCC7F3-E247-DC11-AB79-001731AF6933.root',
            '/store/mc/2007/8/10/RelVal-RelVal160pre9QCD_pt50_80-CMSSW_1_6_0_pre9-1186773613/0000/9623C955-E347-DC11-99C1-0017312B5651.root',
            '/store/mc/2007/8/10/RelVal-RelVal160pre9QCD_pt50_80-CMSSW_1_6_0_pre9-1186773613/0000/C8A50213-E347-DC11-A4FB-003048767ECB.root',
            '/store/mc/2007/8/10/RelVal-RelVal160pre9QCD_pt50_80-CMSSW_1_6_0_pre9-1186773613/0000/DEADC324-E347-DC11-957A-003048752F45.root',
            # RelVal 1.6.0-pre9: QCD jets (80-120 GeV, 5000 events)
            '/store/mc/2007/8/10/RelVal-RelVal160pre9QCD_pt80_120-CMSSW_1_6_0_pre9-1186773613/0000/169B8D94-E347-DC11-896E-0030487248DD.root',
            '/store/mc/2007/8/10/RelVal-RelVal160pre9QCD_pt80_120-CMSSW_1_6_0_pre9-1186773613/0000/20F77D98-E347-DC11-A5CF-003048754C6D.root',
            #'/store/mc/2007/8/10/RelVal-RelVal160pre9QCD_pt80_120-CMSSW_1_6_0_pre9-1186773613/0000/6013D2B0-E847-DC11-A400-00304875505D.root',
            #'/store/mc/2007/8/10/RelVal-RelVal160pre9QCD_pt80_120-CMSSW_1_6_0_pre9-1186773613/0000/6AAEB410-E347-DC11-873C-003048769DC3.root',
            #'/store/mc/2007/8/10/RelVal-RelVal160pre9QCD_pt80_120-CMSSW_1_6_0_pre9-1186773613/0000/708FF367-E347-DC11-9CEE-003048769DC1.root',
            #'/store/mc/2007/8/10/RelVal-RelVal160pre9QCD_pt80_120-CMSSW_1_6_0_pre9-1186773613/0000/A0E33718-E347-DC11-A324-00304870DB4D.root',
            #'/store/mc/2007/8/10/RelVal-RelVal160pre9QCD_pt80_120-CMSSW_1_6_0_pre9-1186773613/0000/D44F0CA8-E347-DC11-BE12-001731230E19.root',
            #'/store/mc/2007/8/10/RelVal-RelVal160pre9QCD_pt80_120-CMSSW_1_6_0_pre9-1186773613/0000/E64A7893-E347-DC11-A57F-003048767DC7.root',
            #'/store/mc/2007/8/10/RelVal-RelVal160pre9QCD_pt80_120-CMSSW_1_6_0_pre9-1186773613/0000/FE50B8D0-E347-DC11-94D0-001731A28543.root'
        }
    }
    # events to analyze
    untracked PSet maxEvents = { untracked int32 input = -1 }

    # (re)run b-tagging algorithms
    include "RecoBTau/Configuration/data/RecoBTau_FrontierConditions.cff"
    include "RecoBTau/Configuration/data/RecoBTau.cff"
    include "RecoBTag/Configuration/data/RecoBTag.cff"

    path btag = { jetTracksAssociator, btagging }

    # Analysis and validation plots
    module  bTagSoftLeptonPlots = bTagSoftLeptonAnalysis from "RecoBTag/Analysis/data/bTagSoftLeptonAnalysis.cfi" 
    replace bTagSoftLeptonPlots.jetTagModuleLabel = { "softMuonJetTags", "softMuonNoIPJetTags", "softElectronJetTags" }
    replace bTagSoftLeptonPlots.rootfile   = "softLepton.root"
    replace bTagSoftLeptonPlots.produceEps = false
    replace bTagSoftLeptonPlots.producePs  = true

    module  bTagTrackIPPlots = bTagTrackIPAnalysis from "RecoBTag/Analysis/data/bTagTrackIPAnalysis.cfi"
    replace bTagTrackIPPlots.jetTagModuleLabel = { "jetProbabilityJetTags", "trackCountingHighPurJetTags", "trackCountingHighEffJetTags", "impactParameterMVAJetTags" }
    replace bTagTrackIPPlots.rootfile   = "trackIP.root"
    replace bTagTrackIPPlots.produceEps = false
    replace bTagTrackIPPlots.producePs  = true

    # module execution
    path plots = { bTagSoftLeptonPlots, bTagTrackIPPlots }

    schedule = { btag, plots }
}
