#! /bin/env cmsRun

process SoftLeptonTag = {

    # input file
    source = PoolSource {
        untracked vstring fileNames = {
            # RelVal 1.5.2: b jets 50-120 - 1050 events
            '/store/RelVal/2007/7/10/RelVal-RelVal152BJets50-120-1184059625/0000/164AA33D-022F-DC11-B0AB-000423D99F1E.root',
            '/store/RelVal/2007/7/10/RelVal-RelVal152BJets50-120-1184059625/0000/2E53B35B-212F-DC11-969D-001617DBD220.root',
            '/store/RelVal/2007/7/10/RelVal-RelVal152BJets50-120-1184059625/0000/58F35F11-042F-DC11-8A1B-000423D6C9E2.root',
            # RelVal 1.5.2: c jets 50-120 - 1050 events
            '/store/RelVal/2007/7/10/RelVal-RelVal152CJets50-120-1184059625/0000/C8C4B142-032F-DC11-82F3-001617C3B6C6.root',
            '/store/RelVal/2007/7/10/RelVal-RelVal152CJets50-120-1184059625/0000/D6002F62-212F-DC11-A487-001617C3B65A.root',
            '/store/RelVal/2007/7/10/RelVal-RelVal152CJets50-120-1184059625/0000/F62FAF61-022F-DC11-8612-001617E30F48.root',
            # RelVal 1.5.2: QCD jets 50-80 - roughly 2000 events
            '/store/RelVal/2007/7/10/RelVal-RelVal152QCD_pt50_80-1184061344/0000/06C81EE0-162F-DC11-B327-000423D6A6F4.root',
            '/store/RelVal/2007/7/10/RelVal-RelVal152QCD_pt50_80-1184061344/0000/2CB6604D-172F-DC11-8684-001617DBD574.root',
            '/store/RelVal/2007/7/10/RelVal-RelVal152QCD_pt50_80-1184061344/0000/38146160-1C2F-DC11-808E-000423D98520.root',
            '/store/RelVal/2007/7/10/RelVal-RelVal152QCD_pt50_80-1184061344/0000/3A1C5D1E-172F-DC11-AABE-000423D9524C.root',
            # RelVal 1.5.2: QCD jets 80-120 - roughly 500 events
            '/store/RelVal/2007/7/10/RelVal-RelVal152QCD_pt80_120-1184061344/0000/126AD646-182F-DC11-9ACA-00304885B32E.root'
        }
    }
    # events to analyze
    untracked PSet maxEvents = { untracked int32 input = -1 }

    # Reconstruction
    include "RecoTracker/Configuration/data/RecoTracker.cff"
    include "TrackingTools/Configuration/data/TrackingTools.cff"
    include "RecoMuon/Configuration/data/RecoMuon.cff"
    include "RecoBTag/SoftLepton/data/softLepton.cff"

    # module execution
    path softMuonPath     = { ckftracks, muonreco, softMuonTagInfos, (softMuonJetTags & softMuonNoIPJetTags) }
    path softElectronPath = { btagSoftElectrons, softElectronTagInfos, softElectronJetTags }

    # Analysis and validation plots
    module  bTagSoftLeptonPlots = bTagSoftLeptonAnalysis from "RecoBTag/Analysis/data/bTagSoftLeptonAnalysis.cfi" 
    replace bTagSoftLeptonPlots.jetTagModuleLabel = { "softMuonJetTags", "softMuonNoIPJetTags", "softElectronJetTags" }
    replace bTagSoftLeptonPlots.rootfile          = "softLepton.root"
    replace bTagSoftLeptonPlots.produceEps        = false
    replace bTagSoftLeptonPlots.producePs         = true

    # module execution
    path plots = { bTagSoftLeptonPlots }

    schedule = { softMuonPath, softElectronPath, plots }
}
